(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();var d,c,f,v,u,h,b,I=0,l=0,y=0;function E(){d=[{id:"p1",name:"상품1",val:1e4,q:50},{id:"p2",name:"상품2",val:2e4,q:30},{id:"p3",name:"상품3",val:3e4,q:20},{id:"p4",name:"상품4",val:15e3,q:0},{id:"p5",name:"상품5",val:25e3,q:10}];var n=document.getElementById("app");let e=document.createElement("div");var r=document.createElement("div");let a=document.createElement("h1");v=document.createElement("div"),u=document.createElement("div"),c=document.createElement("select"),f=document.createElement("button"),h=document.createElement("div"),v.id="cart-items",u.id="cart-total",c.id="product-select",f.id="add-to-cart",h.id="stock-status",e.className="bg-gray-100 p-8",r.className="max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-2xl p-8",a.className="text-2xl font-bold mb-4",u.className="text-xl font-bold my-4",c.className="border rounded p-2 mr-2",f.className="bg-blue-500 text-white px-4 py-2 rounded",h.className="text-sm text-gray-500 mt-2",a.textContent="장바구니",f.textContent="추가",q(),r.appendChild(a),r.appendChild(v),r.appendChild(u),r.appendChild(c),r.appendChild(f),r.appendChild(h),e.appendChild(r),n.appendChild(e),g(),setTimeout(function(){setInterval(function(){var t=d[Math.floor(Math.random()*d.length)];Math.random()<.3&&t.q>0&&(t.val=Math.round(t.val*.8),alert("번개세일! "+t.name+"이(가) 20% 할인 중입니다!"),q())},3e4)},Math.random()*1e4),setTimeout(function(){setInterval(function(){if(b){var t=d.find(function(o){return o.id!==b&&o.q>0});t&&(alert(t.name+"은(는) 어떠세요? 지금 구매하시면 5% 추가 할인!"),t.val=Math.round(t.val*.95),q())}},6e4)},Math.random()*2e4)}function q(){c.innerHTML="",d.forEach(function(n){var e=document.createElement("option");e.value=n.id,e.textContent=n.name+" - "+n.val+"원",n.q===0&&(e.disabled=!0),c.appendChild(e)})}function g(){l=0,y=0;for(var n=v.children,e=0,r=0;r<n.length;r++)(function(){for(var s,p=0;p<d.length;p++)if(d[p].id===n[r].id){s=d[p];break}var x=parseInt(n[r].querySelector("span").textContent.split("x ")[1]),C=s.val*x,m=0;y+=x,e+=C,x>=10&&(s.id==="p1"?m=.1:s.id==="p2"?m=.15:s.id==="p3"?m=.2:s.id==="p4"?m=.05:s.id==="p5"&&(m=.25)),l+=C*(1-m)})();let a=0;if(y>=30){var t=l*.25,o=e-l;t>o?(l=e*(1-.25),a=.25):a=(e-l)/e}else a=(e-l)/e;if(new Date().getDay()===2&&(l*=1-.1,a=Math.max(a,.1)),u.textContent="총액: "+Math.round(l)+"원",a>0){var i=document.createElement("span");i.className="text-green-500 ml-2",i.textContent="("+(a*100).toFixed(1)+"% 할인 적용)",u.appendChild(i)}M(),L()}const L=()=>{I=Math.floor(l/1e3);var n=document.getElementById("loyalty-points");n||(n=document.createElement("span"),n.id="loyalty-points",n.className="text-blue-500 ml-2",u.appendChild(n)),n.textContent="(포인트: "+I+")"};function M(){var n="";d.forEach(function(e){e.q<5&&(n+=e.name+": "+(e.q>0?"재고 부족 ("+e.q+"개 남음)":"품절")+`
`)}),h.textContent=n}E();f.addEventListener("click",function(){var n=c.value,e=d.find(function(o){return o.id===n});if(e&&e.q>0){var r=document.getElementById(e.id);if(r){var a=parseInt(r.querySelector("span").textContent.split("x ")[1])+1;a<=e.q?(r.querySelector("span").textContent=e.name+" - "+e.val+"원 x "+a,e.q--):alert("재고가 부족합니다.")}else{var t=document.createElement("div");t.id=e.id,t.className="flex justify-between items-center mb-2",t.innerHTML="<span>"+e.name+" - "+e.val+'원 x 1</span><div><button class="quantity-change bg-blue-500 text-white px-2 py-1 rounded mr-1" data-product-id="'+e.id+'" data-change="-1">-</button><button class="quantity-change bg-blue-500 text-white px-2 py-1 rounded mr-1" data-product-id="'+e.id+'" data-change="1">+</button><button class="remove-item bg-red-500 text-white px-2 py-1 rounded" data-product-id="'+e.id+'">삭제</button></div>',v.appendChild(t),e.q--}g(),b=n}});v.addEventListener("click",function(n){var e=n.target;if(e.classList.contains("quantity-change")||e.classList.contains("remove-item")){var r=e.dataset.productId,a=document.getElementById(r),t=d.find(function(p){return p.id===r});if(e.classList.contains("quantity-change")){var o=parseInt(e.dataset.change),i=parseInt(a.querySelector("span").textContent.split("x ")[1])+o;i>0&&i<=t.q+parseInt(a.querySelector("span").textContent.split("x ")[1])?(a.querySelector("span").textContent=a.querySelector("span").textContent.split("x ")[0]+"x "+i,t.q-=o):i<=0?(a.remove(),t.q-=o):alert("재고가 부족합니다.")}else if(e.classList.contains("remove-item")){var s=parseInt(a.querySelector("span").textContent.split("x ")[1]);t.q+=s,a.remove()}g()}});
